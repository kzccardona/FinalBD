CREATE TYPE number_array AS VARRAY(100) OF INTEGER;

DECLARE
    v2 number_array;
    numero integer := 3;
    cantidad integer := 0;
BEGIN
    v2 := number_array(1, 3, 2, 6, 1, 2);
    cantidad := divisible_sum_pairs(v2, numero);
    DBMS_OUTPUT.PUT_LINE('LAS PAREJAS SON ' || cantidad);
END;

create or replace function divisible_sum_pairs(arreglo number_array, numero INTEGER) return integer is 
suma number := 0;
contador integer :=0;
j integer := 0;
Error exception;
begin
  if arreglo.Count >= 1 and arreglo.Count <= 100 and numero >= 1 and numero <= 100 then
    FOR i IN 1..arreglo.COUNT LOOP
      j := i+1;
        FOR j IN 1..arreglo.COUNT LOOP
          if arreglo(i) < arreglo(j) then
            suma := mod((arreglo(i) + arreglo(j)),numero);
            if suma = 0 then
            --DBMS_OUTPUT.PUT_LINE(i || ',' || j || '->' || arreglo(i) || '+' || arreglo(j) || '=' ||arreglo(i)+ arreglo(j));
            contador := contador +1;
            end if;
          end if;
        END LOOP;
    END LOOP;
    return contador;
    else
      raise Error;
    end if;
    exception
	when Error then
    dbms_output.put_line('loa valores no estan entre 1 y 100');
    return 0;
    when OTHERS then 
    dbms_output.put_line('Ocurrió un error con los valores');
    return 0;
end;